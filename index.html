<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunless Psyche: The Awakening (v2)</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="game-wrapper">

        <!-- Header / Meta Information Area -->
        <header id="game-header">
            <h1>Sunless Psyche</h1>
            <div id="psychonaut-name-display">Psychonaut: <span class="value">The Unknowing</span></div>
            <div id="current-ambition-display">Ambition: <span class="value">To Simply Be</span></div>
        </header>

        <!-- Main Game Area -->
        <main id="main-content-area">

            <!-- Left Panel: Player Stats & Status -->
            <aside id="player-status-panel">
                <h2>Psychonaut Status</h2>
                <div class="stat-block">
                    <label>Integrity:</label>
                    <div class="bar-container">
                        <div id="player-integrity-bar" class="bar integrity"></div>
                    </div>
                    <span id="player-integrity-value" class="value">10/10</span>
                </div>
                <div class="stat-block">
                    <label>Focus:</label>
                    <div class="bar-container">
                        <div id="player-focus-bar" class="bar focus"></div>
                    </div>
                    <span id="player-focus-value" class="value">1/1</span>
                </div>
                <div class="stat-block">
                    <label>Clarity:</label>
                    <div class="bar-container">
                        <div id="player-clarity-bar" class="bar clarity"></div>
                    </div>
                    <span id="player-clarity-value" class="value">1/20</span>
                </div>
                <div class="stat-block">
                    <label>Hope:</label>
                    <div class="bar-container">
                        <div id="player-hope-bar" class="bar hope"></div>
                    </div>
                    <span id="player-hope-value" class="value">0/10</span>
                </div>
                <div class="stat-block">
                    <label>Despair:</label>
                    <div class="bar-container">
                        <div id="player-despair-bar" class="bar despair"></div>
                    </div>
                    <span id="player-despair-value" class="value">7/10</span>
                </div>

                <div id="attunements-display">
                    <h3>Attunements</h3>
                    <ul>
                        <li>Attraction (A): <span id="attunement-a" class="value">0</span></li>
                        <li>Interaction (I): <span id="attunement-i" class="value">0</span></li>
                        <li>Sensory (S): <span id="attunement-s" class="value">0</span></li>
                        <li>Psychological (P): <span id="attunement-p" class="value">0</span></li>
                        <li>Cognitive (C): <span id="attunement-c" class="value">0</span></li>
                        <li>Relational (R): <span id="attunement-r" class="value">0</span></li>
                        <li>RoleFocus (RF): <span id="attunement-rf" class="value">0</span></li>
                    </ul>
                </div>

                <div id="memories-display">
                    <h3>Active Memories (Artifacts)</h3>
                    <ul id="active-memories-list">
                        <li><span class="placeholder">No memories stir...</span></li>
                    </ul>
                </div>
            </aside>

            <!-- Center Panel: World Map / Location / Storylet / Encounter -->
            <section id="world-interaction-panel">
                <div id="pre-game-intro-view" class="view-active">
                    <h2 id="pre-game-title">The Precipice</h2>
                    <div id="pre-game-text-area">
                        <!-- Intro lines will be populated by JS -->
                    </div>
                    <button id="continue-from-precipice" class="view-hidden">Grasp for Awareness...</button>
                </div>

                <div id="map-view" class="view-hidden">
                    <h2>The Inner Sea - <span id="current-node-map-name" class="value">The Shattered Shore</span></h2>
                    <div id="node-map-container">
                        <p class="placeholder">Visualizing connections...</p>
                    </div>
                    <div id="map-node-info">
                         <p>Current Location: <strong id="current-node-name-display">The Shattered Shore</strong></p>
                         <p id="current-node-description-display">A desolate, rocky outcrop...</p>
                         <button id="explore-current-node-button">Explore This Place</button>
                    </div>
                </div>

                <div id="location-view" class="view-hidden">
                    <h2 id="location-name">Location Name</h2>
                    <div id="location-description">
                        <p>Description of the current location...</p>
                    </div>
                    <div id="location-actions">
                        <h3>Actions:</h3>
                        <!-- Populated by JS -->
                        <button id="return-to-map-from-location">Return to Navigation</button>
                    </div>
                </div>

                <div id="storylet-view" class="view-hidden">
                    <h2 id="storylet-title">Storylet Title</h2>
                    <div id="storylet-text">
                        <p>Narrative text of the storylet...</p>
                    </div>
                    <div id="storylet-choices">
                        <h3>Choices:</h3>
                        <!-- Populated by JS -->
                    </div>
                </div>

                <div id="encounter-view" class="view-hidden">
                    <h2>Encounter: <span id="aspect-name-encounter">Aspect Name</span></h2>
                    <div class="encounter-columns">
                        <div class="encounter-aspect-info">
                            <h3>Aspect Details</h3>
                            <div>Resolve: <span id="aspect-resolve-encounter" class="value">X/Y</span></div>
                            <div>Composure: <span id="aspect-composure-encounter" class="value">X</span></div>
                            <div>Resonance: <span id="aspect-resonance-encounter" class="value">X/Y</span></div>
                            <div>Dissonance: <span id="aspect-dissonance-encounter" class="value">X/Y</span></div>
                            <div>Intent: <span id="aspect-intent-encounter" class="value">Aspect plans to...</span></div>
                            <div>Traits: <ul id="aspect-traits-encounter"></ul></div>
                        </div>
                        <div class="encounter-player-info">
                            <h3>Your Status</h3>
                            <div>Focus: <span id="player-focus-encounter" class="value">X/Y</span></div>
                            <div>Integrity: <span id="player-integrity-encounter" class="value">X/Y</span></div>
                            <div>Active Stance: <span id="player-stance-encounter" class="value">None</span></div>
                            <div>Player Composure: <span id="player-composure-encounter" class="value">0</span></div>
                        </div>
                    </div>
                    <div id="player-hand-encounter">
                        <h3>Hand (Concepts):</h3>
                        <div id="player-hand-cards">
                            <!-- Cards will be populated here -->
                        </div>
                    </div>
                    <div id="encounter-controls">
                        <button id="end-turn-encounter">End Turn</button>
                        <button id="reveal-trait-encounter" title="Spend 1 Insight to reveal a hidden Trait">Reveal Trait (1 Insight)</button>
                    </div>
                </div>
            </section>

            <!-- Right Panel: Deck Info / Log / Journal -->
            <aside id="context-panel">
                <div id="deck-info-display">
                    <h3>Deck of Concepts</h3>
                    <p>In Deck: <span id="deck-count-display" class="value">0</span></p>
                    <p>In Hand: <span id="hand-count-display" class="value">0</span></p> <!-- Added hand count -->
                    <p>In Discard: <span id="discard-count-display" class="value">0</span></p>
                    <p>Traumas: <span id="trauma-count-display" class="value">0</span></p>
                    <button id="view-deck-button">View Full Deck</button>
                </div>

                <div id="message-log-display">
                    <h3>Event Log</h3>
                    <div id="log-entries">
                        <p class="log-entry system">Awaiting consciousness...</p>
                    </div>
                </div>

                <div id="journal-display">
                    <h3>Psychonaut's Journal</h3>
                    <div id="journal-entries">
                        <p class="journal-entry placeholder">The pages are blank, aching for input...</p>
                    </div>
                    <button id="add-journal-entry-button">Add Personal Note</button>
                </div>
            </aside>

        </main>

        <footer id="game-footer">
            <button id="game-menu-button">Game Menu</button>
            <span id="game-version">Sunless Psyche v0.1.0 (Awakening v2)</span>
        </footer>

        <div id="modal-overlay" class="view-hidden">
            <div id="modal-deck-view" class="modal-content view-hidden">
                <h2>Your Deck of Concepts</h2>
                <ul id="full-deck-list"></ul>
                <button class="close-modal-button">Close</button>
            </div>

            <div id="modal-game-over" class="modal-content view-hidden">
                <h2 id="game-over-title">Psychological Collapse!</h2>
                <p id="game-over-text">Your journey into the Inner Sea has ended...</p>
                <button id="restart-game-button">Begin Anew</button>
            </div>
        </div>

        <div id="tooltip" class="view-hidden"></div>

    </div> <!-- End #game-wrapper -->

    <script src="js/config.js"></script>
    <script src="js/ui_manager.js"></script>
    <script src="js/player.js"></script>
    <script src="js/world.js"></script>
    <script src="js/storylet_manager.js"></script>
    <script src="js/encounter_manager.js"></script>
    <script src="js/main.js"></script>

</body>
</html>
